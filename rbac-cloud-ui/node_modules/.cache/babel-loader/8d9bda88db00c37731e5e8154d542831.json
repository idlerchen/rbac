{"remainingRequest":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\src\\router\\index.js","dependencies":[{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\src\\router\\index.js","mtime":1578716163428},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport VueRouter from 'vue-router'; // 进度条\n\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport store from '@/store/index';\nimport util from '@/libs/util.js'; // 路由数据\n\nimport routes from '@/config/routes';\nVue.use(VueRouter); // 导出路由 在 main.js 里使用\n\nvar router = new VueRouter({\n  routes: routes\n});\n/**\n * 路由拦截\n * 权限验证\n */\n\nrouter.beforeEach(function (to, from, next) {\n  // 进度条\n  NProgress.start(); // 关闭搜索面板\n\n  store.commit('d2admin/search/set', false); // 验证当前路由所有的匹配中是否需要有登录验证的\n\n  if (to.matched.some(function (r) {\n    return r.meta.auth;\n  })) {\n    // 这里暂时将cookie里是否存有token作为验证是否登录的条件\n    // 请根据自身业务需要修改\n    var token = util.cookies.get('token');\n\n    if (token && token !== 'undefined') {\n      next();\n    } else {\n      // 没有登录的时候跳转到登录界面\n      // 携带上登陆成功之后需要跳转的页面完整路径\n      next({\n        name: 'login',\n        query: {\n          redirect: to.fullPath\n        }\n      }); // https://github.com/d2-projects/d2-admin/issues/138\n\n      NProgress.done();\n    }\n  } else {\n    // 不需要身份校验 直接通过\n    next();\n  }\n});\nrouter.afterEach(function (to) {\n  // 进度条\n  NProgress.done(); // 多页控制 打开新的页面\n\n  store.dispatch('d2admin/page/open', to); // 更改标题\n\n  util.title(to.meta.title);\n});\nexport default router;",null]}