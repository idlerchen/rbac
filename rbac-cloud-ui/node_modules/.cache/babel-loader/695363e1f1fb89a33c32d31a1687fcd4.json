{"remainingRequest":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\tools\\vue-filename-injector\\src\\lib\\injector.js!D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\src\\layouts\\HeaderAside\\components\\menu-header\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\src\\layouts\\HeaderAside\\components\\menu-header\\index.vue","mtime":1578716164469},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IDEA_WorkSpace\\mygit_project\\rbac\\rbac-cloud-ui\\tools\\vue-filename-injector\\src\\lib\\injector.js","mtime":1578716163426}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:\\\\IDEA_WorkSpace\\\\mygit_project\\\\rbac\\\\rbac-cloud-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { throttle } from 'lodash';\nimport { mapState } from 'vuex';\nimport menuMixin from \"../mixin/menu\";\nimport d2LayoutMainMenuItem from \"../components/menu-item/index.vue\";\nimport d2LayoutMainMenuSub from \"../components/menu-sub/index.vue\";\nexport default {\n  name: 'd2-layout-header-aside-menu-header',\n  mixins: [menuMixin],\n  components: {\n    'd2-layout-header-aside-menu-item': d2LayoutMainMenuItem,\n    'd2-layout-header-aside-menu-sub': d2LayoutMainMenuSub\n  },\n  computed: _objectSpread({}, mapState('d2admin/menu', ['header'])),\n  data: function data() {\n    return {\n      active: '',\n      isScroll: false,\n      scrollWidth: 0,\n      contentWidth: 0,\n      currentTranslateX: 0,\n      throttledCheckScroll: null\n    };\n  },\n  watch: {\n    '$route.matched': {\n      handler: function handler(val) {\n        this.active = val[val.length - 1].path;\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    scroll: function scroll(direction) {\n      if (direction === 'left') {\n        // 向右滚动\n        this.currentTranslateX = 0;\n      } else {\n        // 向左滚动\n        if (this.contentWidth * 2 - this.currentTranslateX <= this.scrollWidth) {\n          this.currentTranslateX -= this.contentWidth;\n        } else {\n          this.currentTranslateX = this.contentWidth - this.scrollWidth;\n        }\n      }\n    },\n    checkScroll: function checkScroll() {\n      var _this = this;\n\n      var contentWidth = this.$refs.content.clientWidth;\n      var scrollWidth = this.$refs.scroll.clientWidth;\n\n      if (this.isScroll) {\n        // 页面依旧允许滚动的情况，需要更新width\n        if (this.contentWidth - this.scrollWidth === this.currentTranslateX) {\n          // currentTranslateX 也需要相应变化【在右端到头的情况时】\n          this.currentTranslateX = contentWidth - scrollWidth; // 快速的滑动依旧存在判断和计算时对应的contentWidth变成正数，所以需要限制一下\n\n          if (this.currentTranslateX > 0) {\n            this.currentTranslateX = 0;\n          }\n        } // 更新元素数据\n\n\n        this.contentWidth = contentWidth;\n        this.scrollWidth = scrollWidth; // 判断何时滚动消失: 当scroll > content\n\n        if (contentWidth > scrollWidth) {\n          this.isScroll = false;\n        }\n      } // 判断何时滚动出现: 当scroll < content\n\n\n      if (!this.isScroll && contentWidth < scrollWidth) {\n        this.isScroll = true; // 注意，当isScroll变为true，对应的元素盒子大小会发生变化\n\n        this.$nextTick(function () {\n          contentWidth = _this.$refs.content.clientWidth;\n          scrollWidth = _this.$refs.scroll.clientWidth;\n          _this.contentWidth = contentWidth;\n          _this.scrollWidth = scrollWidth;\n          _this.currentTranslateX = 0;\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    // 初始化判断\n    // 默认判断父元素和子元素的大小，以确定初始情况是否显示滚动\n    window.addEventListener('load', this.checkScroll); // 全局窗口变化监听，判断父元素和子元素的大小，从而控制isScroll的开关\n\n    this.throttledCheckScroll = throttle(this.checkScroll, 300);\n    window.addEventListener('resize', this.throttledCheckScroll);\n  },\n  beforeDestroy: function beforeDestroy() {\n    // 取消监听\n    window.removeEventListener('resize', this.throttledCheckScroll);\n    window.removeEventListener('load', this.checkScroll);\n  }\n};",null]}